{% extends 'layout.html' %}
{% load static %}

{% block content %}
<!-- MAIN -->

<!-- FILTERS -->
<div class="row">
    <div class="col-12">
        <div class="card">
            <header class="card-header">
                <h1 class="card-title">FILTROS</h1>
            </header>
            <main class="card-body container">
                <section class="row">
                    <div class="col-md-3 d-flex flex-column">
                        <b>Inicio:</b>
                        <input class="form-control" type="date" id="dateStart"/>
                        <small id="labelDateStart"></small>
                    </div>
                    <div class="col-md-3 d-flex flex-column">
                        <b>Fin:</b>
                        <input class="form-control" type="date" id="dateEnd"/>
                        <small id="labelDateEnd"></small>
                    </div>
                    <div class="col-md-3 d-flex flex-column">
                        <b>Histopat√≥logo:</b>
                        <select id="pathologist" class="form-control">
                            {% if current_user is not None %}
                            <option value="{{ current_user.id }}">{{ current_user.first_name }} {{current_user.last_name}}</option>
                            {% else %}
                            <option value="0">Todos</option>
                            {% for pathologist in pathologists %}
                            <option
                                {% if user_id == pathologist.id  %} selected {% endif %}
                                value="{{ pathologist.id }}">
                                {{ pathologist.first_name }} {{ pathologist.last_name }}
                            </option>
                            {% endfor %}
                            {% endif %}
                        </select>
                    </div>
                    <div class="col-md-3 d-flex flex-column justify-content-center align-items-center">
                        <button id="btnFilter" class="btn-outline-dark py-2 px-3 rounded shadow-box">Filtrar</button>
                    </div>
                </section>
            </main>
        </div>
    </div>
</div>
<!-- END FILTERS -->

<!-- EFFICIENCY -->
<div class="row">
    <div class="col-12">
        <div class="card">
            <header class="card-header">
                <h1 class="card-title">RENDIMIENTO</h1>
            </header>
            <main class="card-body container-fluid">
                <section class="row">
                    <div class="col-md-12 table-responsive">
                        <table id="efficiencyTable" class="table table-sm table-striped">
                        </table>
                    </div>
                </section>
                <div class="row mt-4">
                    <aside class="col-md-6 d-flex flex-column">
                        <h3>Promedio por Periodo</h3>
                        <div id="averageEfficiency"  style="width: 100%; height:20rem;"></div>
                    </aside>
                    <aside class="col-md-6 d-flex flex-column">
                        <h3>Promedio por Mes</h3>
                        <div id="monthlyEfficiency"  style="width: 100%; height:20rem;"></div>
                    </aside>
                </div>
                <section class="row mt-4">
                    <div class="col-md-12 table-responsive">
                        <table id="serviceWeekTable" class="table table-sm table-bordered table-striped">
                            <thead>
                                <tr id="weeks">
                                </tr>
                            </thead>
                            <tbody id="serviceWeekTbody">
                            </tbody>
                            <tfooter id="serviceWeekTfooter"></tfooter>
                        </table>
                    </div>
                </section>
            </main>
        </div>
    </div>
</div>
<!-- END EFFICIENCY -->

<!-- END MAIN -->

{% endblock content %}
{% block scripts %}
<script
    type="text/javascript"
    src="//cdn.jsdelivr.net/npm/sweetalert2@10"
    defer>
</script>


<script type="text/javascript"
        src="{% static 'report/js/pathologist-efficiency.js' %}"
        defer>
</script>
{% endblock scripts %}
