{% extends 'layout.html' %}
{% load static %}

{% block content %}
<!-- MAIN -->

<!-- FILTERS -->
<div class="row">
    <div class="col-12">
        <div class="card">
            <header class="card-header">
                <h1 class="card-title">FILTROS</h1>
            </header>
            <main class="card-body container">
                <section class="row">
                    <div class="col-md-3 d-flex flex-column">
                        <b>Inicio:</b>
                        <input class="form-control" type="date" id="dateStart"/>
                    </div>
                    <div class="col-md-3 d-flex flex-column">
                        <b>Fin:</b>
                        <input class="form-control" type="date" id="dateEnd"/>
                    </div>
                    <div class="col-md-3 d-flex flex-column">
                        <b>Histopat√≥logo:</b>
                        <select id="pathologist" class="form-control">
                            {% if current_user is not None %}
                            <option value="{{ current_user.id }}">{{ current_user.first_name }} {{current_user.last_name}}</option>
                            {% else %}
                            <option value="0">Todos</option>
                            {% for pathologist in pathologists %}
                            <option
                                {% if user_id == pathologist.id  %} selected {% endif %}
                                value="{{ pathologist.id }}">
                                {{ pathologist.first_name }} {{ pathologist.last_name }}
                            </option>
                            {% endfor %}
                            {% endif %}
                        </select>
                    </div>
                    <div class="col-md-3 d-flex flex-column justify-content-center align-items-center">
                        <button id="btnFilter" class="btn-outline-dark py-2 px-3 rounded shadow-box">Filtrar</button>
                    </div>
                </section>
            </main>
        </div>
    </div>
</div>
<!-- END FILTERS -->

<!-- PENDING JOBS -->
<div class="row">
    <div class="col-12">
        <div class="card">
            <header class="card-header">
                <h1 class="card-title">TRABAJO PENDIENTE</h1>
            </header>
            <main class="card-body container">
                <section class="row">
                    <div class="col-md-2 d-flex flex-column justify-content-center border-right">
                        <h1 class="text-center">
                            <b>Casos por revisar:</b>
                        </h1>
                        <h3 class="text-center">
                            <span id="pendingNumber"></span>
                        </h3>
                    </div>
                    <div class="col-md-10 table-responsive" style="max-height: 24rem">
                        <table id="pendingTable" class="table table-sm table-striped" style>
                        </table>
                    </div>
                </section>
            </main>
        </div>
    </div>
</div>
<!-- END PENDING JOBS -->

<!-- EFFICIENCY -->
<div class="row">
    <div class="col-12">
        <div class="card">
            <header class="card-header">
                <h1 class="card-title">RENDIMIENTO</h1>
            </header>
            <main class="card-body container">
                <section class="row">
                    <div class="col-md-12 table-responsive">
                        <table id="efficiencyTable" class="table table-sm table-striped">
                        </table>
                    </div>
                </section>
                <div class="row">
                    <aside class="col-md-6 d-flex flex-column">
                        <h3>Promedio Mensual</h3>
                        <div id="averageEfficiency"  style="width: 100%; height:20rem;"></div>
                    </aside>
                    <aside class="col-md-6 d-flex flex-column">
                        <h3>Promedio por Mes</h3>
                        <div id="monthlyEfficiency"  style="width: 100%; height:20rem;"></div>
                    </aside>
                </div>
            </main>
        </div>
    </div>
</div>
<!-- END EFFICIENCY -->

<!-- END MAIN -->

{% endblock content %}
{% block scripts %}
<script
    type="text/javascript"
    src="//cdn.jsdelivr.net/npm/sweetalert2@10"
    defer>
</script>


<script type="text/javascript"
        src="{% static 'report/js/pathologist-home.js' %}"
        defer>
</script>
{% endblock scripts %}
