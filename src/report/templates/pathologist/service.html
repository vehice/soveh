{% extends 'layout.html' %}
{% load static %}

{% block content %}
<!-- MAIN -->

<!-- FILTERS -->
<div class="row">
    <div class="col-12">
        <div class="card">
            <header class="card-header">
                <h1 class="card-title">FILTROS</h1>
            </header>
            <main class="card-body container">
                <section class="row">
                    <div class="col-md-3 d-flex flex-column">
                        <b>Inicio:</b>
                        <input class="form-control" type="date" id="dateStart"/>
                        <small id="labelDateStart"></small>
                    </div>
                    <div class="col-md-3 d-flex flex-column">
                        <b>Fin:</b>
                        <input class="form-control" type="date" id="dateEnd"/>
                        <small id="labelDateEnd"></small>
                    </div>
                    <div class="col-md-3 d-flex flex-column">
                        <b>Histopatólogo:</b>
                        <select id="pathologist" class="form-control">
                            {% if current_user is not None %}
                            <option value="{{ current_user.id }}">{{ current_user.first_name }} {{current_user.last_name}}</option>
                            {% else %}
                            <option value="0">Todos</option>
                            {% for pathologist in pathologists %}
                            <option
                                {% if user_id == pathologist.id  %} selected {% endif %}
                                value="{{ pathologist.id }}">
                                {{ pathologist.first_name }} {{ pathologist.last_name }}
                            </option>
                            {% endfor %}
                            {% endif %}
                        </select>
                    </div>
                    <div class="col-md-3 d-flex flex-column justify-content-center align-items-center">
                        <button id="btnFilter" class="btn-outline-dark py-2 px-3 rounded shadow-box">Filtrar</button>
                    </div>
                </section>
            </main>
        </div>
    </div>
</div>
<!-- END FILTERS -->

<!-- PENDING JOBS -->
<div class="row">
    <div class="col-12">
        <div class="card">
            <header class="card-header">
                <h1 class="card-title">TRABAJO PENDIENTE</h1>
            </header>
            <main class="card-body container-fluid">
                <!-- Nav tabs -->
                <ul class="nav nav-pill nav-fill" id="myTab" role="tablist">
                    <li class="nav-item" role="presentation">
                        <a class="nav-link active" id="pending-tab" data-toggle="tab" href="#pending" role="tab" aria-controls="pending" aria-selected="true">
                            <h1>Servicios en espera:</h1>
                            <h2>
                                <span id="pendingNumber"></span>
                            </h2>
                        </a>
                    </li>
                    <li class="nav-item" role="presentation">
                        <a class="nav-link" id="current-tab" data-toggle="tab" href="#current" role="tab" aria-controls="current" aria-selected="false">
                            <h1>Servicios en lectura:</h1>
                            <h2>
                                <span id="currentNumber"></span>
                            </h2>
                        </a>
                    </li>
                    <li class="nav-item" role="presentation">
                        <a class="nav-link" id="unreview-tab" data-toggle="tab" href="#unreview" role="tab" aria-controls="unreview" aria-selected="false">
                            <h1>Servicios en revisión:</h1>
                            <h2>
                                <span id="unreviewNumber"></span>
                            </h2>
                        </a>
                    </li>
                </ul>

                <!-- Tab panes -->
                <div class="tab-content mt-3 table-responsive">
                    <div class="tab-pane active" id="pending" role="tabpanel" aria-labelledby="pending-tab">
                        <h3 class="border-bottom">Servicios en espera</h3>
                        <table id="pendingTable" class="table table-sm table-striped" style></table>
                    </div>
                    <div class="tab-pane" id="current" role="tabpanel" aria-labelledby="current-tab">
                        <h3 class="border-bottom">Servicios en lectura</h3>
                        <table id="currentTable" class="table table-sm table-striped" style></table>
                    </div>
                    <div class="tab-pane" id="unreview" role="tabpanel" aria-labelledby="unreview-tab">
                        <h3 class="border-bottom">Servicios en revisión</h3>
                        <table id="unreviewTable" class="table table-sm table-striped"></table>
                    </div>
                </div>
            </main>
        </div>
    </div>
</div>
<!-- END PENDING JOBS -->

<!-- END MAIN -->

{% endblock content %}
{% block scripts %}
<script
    type="text/javascript"
    src="//cdn.jsdelivr.net/npm/sweetalert2@10"
    defer>
</script>


<script type="text/javascript"
        src="{% static 'report/js/pathologist-service.js' %}"
        defer>
</script>
{% endblock scripts %}
