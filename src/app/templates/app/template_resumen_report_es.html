{% extends 'base_pdf.html' %}
{% load static %}
{% block stylesheets %}

<style type="text/css">
  .text-white {
    color: white !important;
  }

  .container {
    font-family: "Helvetica" !important;
    font-size: 10px !important;
    
  }

  .t1 {
    font-family: "Helvetica" !important;
    font-size: 14px !important;
    font-weight: bold !important;
    
  }

  .t2 {
    font-family: "Helvetica" !important;
    font-size: 12px !important;
    font-weight: bold !important;
    
  }

  .t3 {
    font-family: "Helvetica" !important;
    font-size: 11px !important;
    font-weight: bold !important;
    
  }

  .t3_n {
    font-family: "Helvetica" !important;
    font-size: 11px !important;
    font-weight: normal !important;
    
  }

  div {
    font-family: "Helvetica" !important;
    font-size: 10px !important;
    
    
  }
</style>

{% endblock stylesheets %}

{% block body %}
<div class="container">
  <div class="row" style="page-break-inside: avoid !important; border: 1px solid #e0e0e0;">
    <div class="col-xs-3" style="padding: 10px 0px; border: 1px solid #e0e0e0; height: 60px; text-align: center;">
      <img alt="" src="{% static 'assets/images/logo/logo.png' %}" class="img-fluid float-left" style="width: 150px;">
    </div>
    <div class="col-xs-5" style="padding: 10px 2px 0px 0px; border: 1px solid #e0e0e0; height: 60px;">
      <center><span class="t1">
        FORMULARIO RECEPCIÓN DE MUESTRAS
      </span></center>
    </div>
    <div class="col-xs-2" style="padding: 10px 2px 0px 0px;; border: 1px solid #e0e0e0; height: 60px;">
      <div class="col-xs-12">
        <span class="t3">Fecha:</span>
      </div>
      <div class="col-xs-12">
        <span class="t3">Hora:</span>
      </div>
      <div class="col-xs-12">
        <span class="t3">Version:</span>
      </div>
    </div>
    <div class="col-xs-2" style="padding: 10px 2px 0px 0px; border: 1px solid #e0e0e0; height: 60px;">
      <div class="col-xs-12">
        <span class="t3_n">{{doc_data.created_at|date:'d/m/Y'}}</span>
      </div>
      <div class="col-xs-12">
        <span class="t3_n">{{doc_data.created_at|date:'H:i'}}</span>
      </div>
      <div class="col-xs-12">
        <span class="t3_n">v{{doc_data.version}}</span>
      </div>
    </div>
  </div>

  <div class="row" style="page-break-inside: avoid !important;">
    <div class="col-xs-12" style="margin-top:2% !important; border: 1px solid #e0e0e0; text-align: center; background-color: #fbe9e7;">
      <span class="t2" style="text-transform: uppercase; margin: 3px;">Información del caso</span>
    </div>

    <div class="col-xs-3" style="border: 1px solid #e0e0e0; height: 40px; padding:10px;">
      <span class="t3">No. Caso:</span>
    </div>
    <div class="col-xs-3" style="border: 1px solid #e0e0e0; height: 40px; padding:10px;">
      <span class="t3_n">{{entryform.no_caso}}</span>
    </div>
    <div class="col-xs-3" style="border: 1px solid #e0e0e0; height: 40px; padding:10px;">
      <span class="t3">Fecha Recepción:</span>
    </div>
    <div class="col-xs-3" style="border: 1px solid #e0e0e0; height: 40px; padding:10px;">
      <span class="t3_n">{{ entryform.created_at|date:'d/m/Y, H:i'}}</span>
    </div>

    <div class="col-xs-3" style="border: 1px solid #e0e0e0; height: 40px; padding:10px;">
      <span class="t3">Empresa:</span>
    </div>
    <div class="col-xs-3" style="border: 1px solid #e0e0e0; height: 40px; padding:10px;">
      <span class="t3_n">{{entryform.company | default:""}}</span>
    </div>
    <div class="col-xs-3" style="border: 1px solid #e0e0e0; height: 40px; padding:10px;">
      <span class="t3">Nro Solicitud:</span>
    </div>
    <div class="col-xs-3" style="border: 1px solid #e0e0e0; height: 40px; padding:10px;">
      <span class="t3_n">{{ entryform.no_request | default:"" }}</span>
    </div>

    <div class="col-xs-3" style="border: 1px solid #e0e0e0; height: 40px; padding:10px;">
      <span class="t3">Centro:</span>
    </div>
    <div class="col-xs-3" style="border: 1px solid #e0e0e0; height: 40px; padding:10px;">
      <span class="t3_n">{{entryform.center | default:""}}</span>
    </div>
    <div class="col-xs-3" style="border: 1px solid #e0e0e0; height: 40px; padding:10px;">
      <span class="t3">Solicitante:</span>
    </div>
    <div class="col-xs-3" style="border: 1px solid #e0e0e0; height: 40px; padding:10px;">
      <span class="t3_n">--</span>
    </div>

    <div class="col-xs-12"
      style="margin-top:0 !important; border: 1px solid #e0e0e0; text-align: center; background-color: #fbe9e7;">
      <span class="t2" style="text-transform: uppercase; margin: 3px;"><strong>INFORMACIÓN DE LA MUESTRA</strong></span>
    </div>

    <div class="col-xs-3" style="border: 1px solid #e0e0e0; height: 40px; padding:10px;">
      <span class="t3">Fecha Muestreo:</span>
    </div>
    <div class="col-xs-3" style="border: 1px solid #e0e0e0; height: 40px; padding:10px;">
      <span class="t3_n">{{ entryform.sampled_at|date:'d/m/Y, H:i'}}</span>
    </div>
    <div class="col-xs-3" style="border: 1px solid #e0e0e0; height: 40px; padding:10px;">
      <span class="t3">Fijador:</span>
    </div>
    <div class="col-xs-3" style="border: 1px solid #e0e0e0; height: 40px; padding:10px;">
      <span class="t3_n">{{entryform.fixative.name|default:""|title}}</span>
    </div>

    <div class="col-xs-2" style="border: 1px solid #e0e0e0; height: 40px; padding:10px;">
      <span class="t3">Especie:</span>
    </div>
    <div class="col-xs-2" style="border: 1px solid #e0e0e0; height: 40px; padding:10px;">
      <span class="t3_n">{{entryform.specie.name |default:""|title}}</span>
    </div>
    <div class="col-xs-2" style="border: 1px solid #e0e0e0; height: 40px; padding:10px;">
      <span class="t3">Estadío:</span>
    </div>
    <div class="col-xs-2" style="border: 1px solid #e0e0e0; height: 40px; padding:10px;">
      <span class="t3_n">{{entryform.larvalstage.name |default:""|title}}</span>
    </div>
    <div class="col-xs-2" style="padding: 0px 3px; border: 1px solid #e0e0e0; height: 40px; padding:10px;">
      <span class="t3">Fuente de Agua:</span>
    </div>
    <div class="col-xs-2" style="border: 1px solid #e0e0e0; height: 40px; padding:10px;">
      <span class="t3_n">{{entryform.watersource.name |default:""|title}}</span>
    </div>

    <div class="col-xs-4" style="border: 1px solid #e0e0e0; height: 60px; background-color: #fbe9e7; padding:10px;">
      <span class="t3">
        OBERVACIONES / <br>
        ANAMNESIS
      </span>
    </div>
    <div class="col-xs-8" style="border: 1px solid #e0e0e0; height: 60px; padding:10px;">
      <span class="t3_n">{{entryform.observation|default:""}}</span>
    </div>
  </div>

  <div class="row"
    style="margin-top:3% !important; border: 1px solid #e0e0e0; text-align: center; background-color: #fbe9e7;">
    <span class="t2" style="text-transform: uppercase; margin: 3px;">Identificación</span>
  </div>
  {% for item in entryform.identifications %}
  <div class="row" style="page-break-inside: avoid !important;">
    <div class="col-xs-12" style="padding:0px !important;" >
      <table class="table table-bordered">
        <tbody>
          <tr>
            <td class="col-xs-2" style="background-color: #fbe9e7;"><span class="t3"> Estanque/Jaula: </span></td>
            <td class="col-xs-2 t3_n">{{item.cage}}</td>
            <td class="col-xs-2" style="background-color: #fbe9e7;"><span class="t3"> Grupo/Lote: </span></td>
            <td class="col-xs-2 t3_n">{{item.group}}</td>
            <td class="col-xs-2" style="background-color: #fbe9e7;"><span class="t3"> Peso Promedio: </span></td>
            <td class="col-xs-2 t3_n">{{item.weight}}</td>
          </tr>
          <tr>
            <td class="col-xs-2" style="background-color: #fbe9e7;"><span class="t3"> Contenedores: </span></td>
            <td class="col-xs-2 t3_n">{{item.no_container}}</td>
            <td  class="col-xs-2" style="background-color: #fbe9e7;"><span class="t3"> Peces </span></td>
            <td class="col-xs-2 t3_n">{{item.no_fish}}</td>
            <td class="col-xs-2" style="background-color: #fbe9e7;"><span class="t3"> ¿Óptimo? </span></td>
            <td class="col-xs-2 t3_n">{% if item.is_optimum %} Sí {%else%} No {% endif %}</td>
          </tr>
          <tr>
            <td class="col-xs-2" style="background-color: #fbe9e7;"><span class="t3">Observaciones</span></td>
            <td colspan="5" class="t3_n">{{item.observation}}</td>
          </tr>
          <tr>
            <td class="col-xs-2" style="background-color: #fbe9e7;"><span class="t3">Análisis Solicitados</span></td>
            <td colspan="5">
              {% for key, value in item.servicios.items %} 
                <p>
                  <span class="t3">{{key}}: </span>
                  <span class="t3_n">
                    {% for l in value %}
                      {% if forloop.last %}
                        {% for k, v in l.items %}
                          {{k|title}} ({{v}})
                        {% endfor %}
                      {% else %}
                        {% for k, v in l.items %}
                          {{k|title}} ({{v}}),
                        {% endfor %}
                      {% endif %} 
                    {% endfor %}
                  </span>
                </p>
              {% endfor %}
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  {% endfor %}

  <div class="row" style="page-break-inside: avoid !important;">
    <div class="col-xs-4" style="border: 1px solid #e0e0e0; height: 40px; padding:10px; background-color: #fbe9e7;">
      <span class="t3">
        CASO INGRESADO POR:
      </span>
    </div>
    <div class="col-xs-8" style="border: 1px solid #e0e0e0; height: 40px; padding:10px;">
      <span class="t3_n">{{case_created_by|default:""}}</span>
    </div>
    <div class="col-xs-4" style="border: 1px solid #e0e0e0; height: 40px; padding:10px; background-color: #fbe9e7;">
      <span class="t3">
        FORMULARIO ENVIADO POR:
      </span>
    </div>
    <div class="col-xs-8" style="border: 1px solid #e0e0e0; height: 40px; padding:10px;">
      <span class="t3_n">{{report_generated_by|default:""}}</span>
    </div>
  </div>

  <div class="row" style="margin-top:3% !important; page-break-inside: avoid !important;">
    <span class="t2" style="text-transform: uppercase; margin: 3px;"><strong>Notas Importantes</strong></span></br>
    <span class="t3_n"> <b>&middot;</b> La cantidad de muestras es referencial según lo declarado por el cliente, se notificará oportunamente en caso de existir alguna diferencia detectada durante el proceso, a través del presente formulario.</span></br>
    <span class="t3_n"> <b>&middot;</b> Para consultas sobre ingreso de muestras y envío de información, dirigirse a recepcion@vehice.com</span></br>
    <span class="t3_n"> <b>&middot;</b> Para consultas técnicas dirigirse a carlos.sandoval@vehice.com</span></br>
    <span class="t3_n"> <b>&middot;</b> Para consultas sobre facturación y otros temas relacionados, dirigirse a gabriela.vera@vehice.com</span></br>
    <span class="t3_n"> <b>&middot;</b> Instructivo para la Toma de Muestras en www.vehice.com/spa/despacho-de-muestras</span>
  </div>
</div>
{% endblock body %}

{% block scripts %}
{% endblock scripts %}